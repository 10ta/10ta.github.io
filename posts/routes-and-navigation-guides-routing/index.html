<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.16.7"><!-- Canonical URL --><link rel="canonical" href="https://10ta.github.io/posts/routes-and-navigation-guides-routing/"><!-- Sitemap --><link rel="sitemap" href="/sitemap-index.xml"><!-- Primary Meta Tags --><title>Routing</title><meta name="title" content="Routing"><meta name="description" content="An intro to routing with Astro."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://10ta.github.io/posts/routes-and-navigation-guides-routing/"><meta property="og:title" content="Routing"><meta property="og:description" content="An intro to routing with Astro."><meta property="og:image" content="https://10ta.github.io/blog-placeholder-1.avif"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://10ta.github.io/posts/routes-and-navigation-guides-routing/"><meta property="twitter:title" content="Routing"><meta property="twitter:description" content="An intro to routing with Astro."><meta property="twitter:image" content="https://10ta.github.io/blog-placeholder-1.avif"><link rel="stylesheet" href="/_astro/_page_.Bdwf1GY7.css"><script type="module" src="/_astro/hoisted.CPfS8Ggc.js"></script>
<script type="module" src="/_astro/page.DTIbhfSr.js"></script>
<script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.10.2 - MIT builder.io */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,d,l,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(l=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(v,1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.10.2":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<l.length;n++)(o=r.createElement("script")).innerHTML=l[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(d)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");if(r)e.newDocument.body.append(r)})})(document);</script></head> <body class="flex flex-col min-h-screen mx-auto max-w-6xl px-4 dark:prose-invert sm:px-6 lg:px-8"> <header class="z-50 flex w-full flex-wrap py-7 md:flex-nowrap md:justify-start"> <nav class="relative mx-auto flex w-full max-w-7xl basis-full flex-wrap items-center px-4" aria-label="Global"> <div class=""> <a class="flex-none text-xl font-semibold" href="/" aria-label="Astroverse"> AstroMelody </a> </div> <div class="ms-auto flex items-center gap-x-2 py-1"> <a class="inline-flex items-center gap-x-2 rounded-xl border border-transparent px-3 py-2 text-sm font-medium disabled:pointer-events-none disabled:opacity-50" href="/search/" href="/search/"> <i class="icon-base i-tabler-search"></i> </a> <div class="dropdown dropdown-end"> <div tabindex="0" role="button" class="flex size-[38px] items-center justify-center rounded-xl text-sm font-semibold"> <i class="icon-base i-tabler-category-2"></i> </div> <ul tabindex="0" class="menu dropdown-content z-[1] w-52 rounded-box bg-base-100 p-2 shadow"> <li> <a href="/category/One/1/" class="px-4 py-3 font-medium"> One </a> </li><li> <a href="/category/Two/1/" class="px-4 py-3 font-medium"> Two </a> </li><li> <a href="/category/Three/1/" class="px-4 py-3 font-medium"> Three </a> </li> </ul> </div> <label class="swap swap-rotate rounded-xl px-3 py-2 text-sm"> <!-- this hidden checkbox controls the state --> <input type="checkbox" class="theme-controller" data-unchecked-value="corporate" value="halloween"> <!-- sun icon --> <i class="icon-base swap-off i-tabler-sun-filled"></i> <!-- moon icon --> <i class="icon-base swap-on i-tabler-moon-filled"></i> </label> </div> </nav> </header> <!-- Save theme to localStorage --> <script>
  const lightTheme =  document.querySelector('.theme-controller')?.getAttribute('data-unchecked-value');
  // ☝️ This script prevent the FART effect.
  if (localStorage.getItem("theme") === null) {
    document.documentElement.setAttribute("data-theme", lightTheme);
  } else
    document.documentElement.setAttribute(
      "data-theme",
      localStorage.getItem("theme"),
    );
  // "theme" LocalStorage value is set by the package to remember user preference.
  // The value is checked and applyed before rendering anything.
</script>  <!-- 内容区域，确保其动态调整高度 --> <main class="flex-grow">  <main> <article class="prose mx-auto dark:prose-invert"> <div class="prose-h1 text-center"> <h1>Routing</h1> </div> <div> <picture> <source srcset="/_astro/photo-1443641723753-250ff9bb3c83_1k4Hzr.avif 392w, /_astro/photo-1443641723753-250ff9bb3c83_8wotI.avif 700w, /_astro/photo-1443641723753-250ff9bb3c83_2vgvhO.avif 980w, /_astro/photo-1443641723753-250ff9bb3c83_Z2nhg62.avif 1960w" type="image/avif" sizes="(max-width: 360px) 392px, 
           (max-width: 720px) 700px, 
           (max-width: 1600px) 980px, 
           1960px"> <img src="/_astro/photo-1443641723753-250ff9bb3c83_Z2nhg62.avif" srcset="/_astro/photo-1443641723753-250ff9bb3c83_1k4Hzr.avif 392w, /_astro/photo-1443641723753-250ff9bb3c83_8wotI.avif 700w, /_astro/photo-1443641723753-250ff9bb3c83_2vgvhO.avif 980w, /_astro/photo-1443641723753-250ff9bb3c83_Z2nhg62.avif 1960w" alt="black concrete building during daytime" sizes="(max-width: 360px) 392px, 
           (max-width: 720px) 700px, 
           (max-width: 1600px) 980px, 
           1960px" class="mx-auto w-full max-w-full object-cover" width="1960" height="1102" loading="lazy" decoding="async"> </picture> </div> <div> <p>Astro uses <strong>file-based routing</strong> to generate your build URLs based on the file layout of your project <code>src/pages/</code> directory.</p>
<h2 id="navigating-between-pages">Navigating between pages</h2>
<p><a href="#navigating-between-pages">Section titled Navigating between pages</a>
Astro uses standard HTML <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a"><code>&#x3C;a></code> elements</a> to navigate between routes. There is no framework-specific <code>&#x3C;Link></code> component provided.</p>
<p>src/pages/index.astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>&#x3C;p>Read more &#x3C;a href="/about/">about&#x3C;/a> Astro!&#x3C;/p></span></span>
<span class="line"><span>&#x3C;!-- With `base: "/docs"` configured -->&#x3C;p>Learn more in our &#x3C;a href="/docs/reference/">reference&#x3C;/a> section!&#x3C;/p></span></span>
<span class="line"><span></span></span></code></pre>
<h2 id="static-routes">Static routes</h2>
<p><a href="#static-routes">Section titled Static routes</a>
<code>.astro</code> <a href="/en/basics/astro-pages/">page components</a> as well as Markdown and MDX Files (<code>.md</code>, <code>.mdx</code>) within the <code>src/pages/</code> directory <strong>automatically become pages on your website</strong>. Each page’s route corresponds to its path and filename within the <code>src/pages/</code> directory.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span># Example: Static routessrc/pages/index.astro        -> mysite.com/src/pages/about.astro        -> mysite.com/aboutsrc/pages/about/index.astro  -> mysite.com/aboutsrc/pages/about/me.astro     -> mysite.com/about/mesrc/pages/posts/1.md         -> mysite.com/posts/1</span></span>
<span class="line"><span></span></span></code></pre>
<p>Tip</p>
<p>There is no separate “routing config” to maintain in an Astro project! When you add a file to the <code>src/pages/</code> directory, a new route is automatically created for you. In static builds, you can customize the file output format using the <a href="/en/reference/configuration-reference/#buildformat"><code>build.format</code></a> configuration option.</p>
<h2 id="dynamic-routes">Dynamic routes</h2>
<p><a href="#dynamic-routes">Section titled Dynamic routes</a>
An Astro page file can specify dynamic route parameters in its filename to generate multiple, matching pages. For example, <code>src/pages/authors/[author].astro</code> generates a bio page for every author on your blog. <code>author</code> becomes a <em>parameter</em> that you can access from inside the page.</p>
<p>In Astro’s default static output mode, these pages are generated at build time, and so you must predetermine the list of <code>author</code>s that get a corresponding file. In SSR mode, a page will be generated on request for any route that matches.</p>
<h3 id="static-ssg-mode">Static (SSG) Mode</h3>
<p><a href="#static-ssg-mode">Section titled Static (SSG) Mode</a>
Because all routes must be determined at build time, a dynamic route must export a <code>getStaticPaths()</code> that returns an array of objects with a <code>params</code> property. Each of these objects will generate a corresponding route.</p>
<p><code>[dog].astro</code> defines the dynamic <code>dog</code> parameter in its filename, so the objects returned by <code>getStaticPaths()</code> must include <code>dog</code> in their <code>params</code>. The page can then access this parameter using <code>Astro.params</code>.</p>
<p>src/pages/dogs/[dog].astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---export function getStaticPaths() {  return [    {params: {dog: 'clifford'}},    {params: {dog: 'rover'}},    {params: {dog: 'spot'}},  ];}</span></span>
<span class="line"><span>const { dog } = Astro.params;---&#x3C;div>Good dog, {dog}!&#x3C;/div></span></span>
<span class="line"><span></span></span></code></pre>
<p>This will generate three pages: <code>/dogs/clifford</code>, <code>/dogs/rover</code>, and <code>/dogs/spot</code>, each displaying the corresponding dog name.</p>
<p>The filename can include multiple parameters, which must all be included in the <code>params</code> objects in <code>getStaticPaths()</code>:</p>
<p>src/pages/[lang]-[version]/info.astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---export function getStaticPaths () { return [    {params: {lang: 'en', version: 'v1'}},    {params: {lang: 'fr', version: 'v2'}},  ];}</span></span>
<span class="line"><span>const { lang, version } = Astro.params;---...</span></span>
<span class="line"><span></span></span></code></pre>
<p>This will generate <code>/en-v1/info</code> and <code>/fr-v2/info</code>.</p>
<p>Parameters can be included in separate parts of the path. For example, the file <code>src/pages/[lang]/[version]/info.astro</code> with the same <code>getStaticPaths()</code> above will generate the routes <code>/en/v1/info</code> and <code>/fr/v2/info</code>.</p>
<p>Learn more about <a href="/en/reference/api-reference/#getstaticpaths"><code>getStaticPaths()</code></a>.</p>
<p><strong>Related recipe:</strong>
<a href="/en/recipes/i18n/">Add i18n features</a></p>
<h4 id="rest-parameters">Rest parameters</h4>
<p><a href="#rest-parameters">Section titled Rest parameters</a>
If you need more flexibility in your URL routing, you can use a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters">rest parameter</a> (<code>[...path]</code>) in your <code>.astro</code> filename to match file paths of any depth:</p>
<p>src/pages/sequences/[…path].astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---export function getStaticPaths() {  return [    {params: {path: 'one/two/three'}},    {params: {path: 'four'}},    {params: {path: undefined }}  ]}</span></span>
<span class="line"><span>const { path } = Astro.params;---...</span></span>
<span class="line"><span></span></span></code></pre>
<p>This will generate <code>/sequences/one/two/three</code>, <code>/sequences/four</code>, and <code>/sequences</code>. (Setting the rest parameter to <code>undefined</code> allows it to match the top level page.)</p>
<p>Rest parameters can be used with <strong>other named parameters</strong>. For example, GitHub’s file viewer can be represented with the following dynamic route:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>/[org]/[repo]/tree/[branch]/[...file]</span></span>
<span class="line"><span></span></span></code></pre>
<p>In this example, a request for <code>/withastro/astro/tree/main/docs/public/favicon.svg</code> would be split into the following named parameters:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>{  org: 'withastro',  repo: 'astro',  branch: 'main',  file: 'docs/public/favicon.svg'}</span></span>
<span class="line"><span></span></span></code></pre>
<h4 id="example-dynamic-pages-at-multiple-levels">Example: Dynamic pages at multiple levels</h4>
<p><a href="#example-dynamic-pages-at-multiple-levels">Section titled Example: Dynamic pages at multiple levels</a>
In the following example, a rest parameter (<code>[...slug]</code>) and the <a href="/en/reference/api-reference/#data-passing-with-props"><code>props</code></a> feature of <code>getStaticPaths()</code> generate pages for slugs of different depths.</p>
<p>src/pages/[…slug].astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---export async function getStaticPaths() {  const pages = [    {      slug: undefined,      title: "Astro Store",      text: "Welcome to the Astro store!",    },    {      slug: "products",      title: "Astro products",      text: "We have lots of products for you",    },    {      slug: "products/astro-handbook",      title: "The ultimate Astro handbook",      text: "If you want to learn Astro, you must read this book.",    },  ];  return pages.map(({ slug, title, text }) => {    return {      params: { slug },      props: { title, text },    };  });}</span></span>
<span class="line"><span>const { title, text } = Astro.props;---&#x3C;html>  &#x3C;head>    &#x3C;title>{title}&#x3C;/title>  &#x3C;/head>  &#x3C;body>    &#x3C;h1>{title}&#x3C;/h1>    &#x3C;p>{text}&#x3C;/p>  &#x3C;/body>&#x3C;/html></span></span>
<span class="line"><span></span></span></code></pre>
<h3 id="server-ssr-mode">Server (SSR) Mode</h3>
<p><a href="#server-ssr-mode">Section titled Server (SSR) Mode</a>
In <a href="/en/guides/server-side-rendering/">SSR mode</a>, dynamic routes are defined the same way: include <code>[param]</code> or <code>[...path]</code> brackets in your file names to match arbitrary strings or paths. But because the routes are no longer built ahead of time, the page will be served to any matching route. Since these are not “static” routes, <code>getStaticPaths</code> should not be used.</p>
<p>src/pages/resources/[resource]/[id].astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---const { resource, id } = Astro.params;---&#x3C;h1>{resource}: {id}&#x3C;/h1></span></span>
<span class="line"><span></span></span></code></pre>
<p>This page will be served for any value of <code>resource</code> and <code>id</code>: <code>resources/users/1</code>, <code>resources/colors/blue</code>, etc.</p>
<h4 id="modifying-the-slug-example-for-ssr">Modifying the <code>[...slug]</code> example for SSR</h4>
<p>[Section titled Modifying the […slug] example for SSR](#modifying-the-slug-example-for-ssr)
Because SSR pages can’t use <code>getStaticPaths()</code>, they can’t receive props. The <a href="#example-dynamic-pages-at-multiple-levels">previous example</a> can be adapted for SSR mode by looking up the value of the <code>slug</code> param in an object. If the route is at the root (”/”), the slug param will be <code>undefined</code>. If the value doesn’t exist in the object, we redirect to a 404 page.</p>
<p>src/pages/[…slug].astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---const pages = [  {    slug: undefined,    title: 'Astro Store',    text: 'Welcome to the Astro store!',  },  {    slug: 'products',    title: 'Astro products',    text: 'We have lots of products for you',  },  {    slug: 'products/astro-handbook',    title: 'The ultimate Astro handbook',    text: 'If you want to learn Astro, you must read this book.',  }];</span></span>
<span class="line"><span>const { slug } = Astro.params;const page = pages.find((page) => page.slug === slug);if (!page) return Astro.redirect("/404");const { title, text } = page;---&#x3C;html>&#x3C;head>  &#x3C;title>{title}&#x3C;/title>&#x3C;/head>&#x3C;body>  &#x3C;h1>{title}&#x3C;/h1>  &#x3C;p>{text}&#x3C;/p>&#x3C;/body>&#x3C;/html></span></span>
<span class="line"><span></span></span></code></pre>
<h2 id="redirects">Redirects</h2>
<p><a href="#redirects">Section titled Redirects</a>
Sometimes you will need to redirect your readers to a new page, either permanently because your site structure has changed or in response to an action such as logging in to an authenticated route.</p>
<p>You can define rules to <a href="#configured-redirects">redirect users to permanently-moved pages</a> in your Astro config. Or, <a href="#dynamic-redirects">redirect users dynamically</a> as they use your site.</p>
<h3 id="configured-redirects">Configured Redirects</h3>
<p><a href="#configured-redirects">Section titled Configured Redirects</a></p>
<p><strong>Added in:</strong>
<code>astro@2.9.0</code></p>
<p>You can specify a mapping of permanent redirects in your Astro config with the <code>redirects</code> value. For most redirects, this is a mapping of an old route to the new route:</p>
<p>astro.config.mjs</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>import { defineConfig } from 'astro/config';</span></span>
<span class="line"><span>export default defineConfig({  redirects: {    '/old-page': '/new-page'  }});</span></span>
<span class="line"><span></span></span></code></pre>
<p>These redirects follow <a href="#route-priority-order">the same priority rules as file-based routes</a> and will always take lower precedence than an existing page file of the same name in your project. For example, <code>/old-page</code> will not redirect to <code>/new-page</code> if your project contains the file <code>src/pages/old-page.astro</code>.</p>
<p>Dynamic routes are allowed as long as both the new and old routes contain the same parameters, for example:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>{  "/blog/[...slug]": "/articles/[...slug]"}</span></span>
<span class="line"><span></span></span></code></pre>
<p>Using SSR or a static adapter, you can also provide an object as the value, allowing you to specify the <code>status</code> code in addition to the new <code>destination</code>:</p>
<p>astro.config.mjs</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>import { defineConfig } from 'astro/config';</span></span>
<span class="line"><span>export default defineConfig({  redirects: {    '/old-page': {      status: 302,      destination: '/new-page'    }  }});</span></span>
<span class="line"><span></span></span></code></pre>
<p>When running <code>astro build</code>, Astro will output HTML files with the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta#examples">meta refresh</a> tag by default. Supported adapters will instead write out the host’s configuration file with the redirects.</p>
<p>The status code is <code>301</code> by default. If building to HTML files the status code is not used by the server.</p>
<h3 id="dynamic-redirects">Dynamic redirects</h3>
<p><a href="#dynamic-redirects">Section titled Dynamic redirects</a>
On the <code>Astro</code> global, the <code>Astro.redirect</code> method allows you to redirect to another page dynamically. You might do this after checking if the user is logged in by getting their session from a cookie.</p>
<p>src/pages/account.astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---import { isLoggedIn } from '../utils';</span></span>
<span class="line"><span>const cookie = Astro.request.headers.get('cookie');</span></span>
<span class="line"><span>// If the user is not logged in, redirect them to the login pageif (!isLoggedIn(cookie)) {  return Astro.redirect('/login');}---&#x3C;html>  &#x3C;!-- Page here... -->&#x3C;/html></span></span>
<span class="line"><span></span></span></code></pre>
<h2 id="rewrites">Rewrites</h2>
<p><a href="#rewrites">Section titled Rewrites</a></p>
<p><strong>Added in:</strong>
<code>astro@4.13.0</code></p>
<p>A rewrite allows you to serve a different route without redirecting the browser to a different page. The browser will show the original address in the URL bar, but will instead display the content of the URL provided to <a href="/en/reference/api-reference/#astrorewrite"><code>Astro.rewrite()</code></a>.</p>
<p>Tip</p>
<p>For content that has permanently moved, or to direct your user to a different page with a new URL (e.g. a user dashboard after logging in), use a <a href="#redirects">redirect</a> instead.</p>
<p>Rewrites can be useful for showing the same content at multiple paths (e.g. <code>/products/shoes/men/</code> and <code>/products/men/shoes/</code>) without needing to maintain two different source files.</p>
<p>Rewrites are also useful for SEO purposes and user experience. They allow you to display content that otherwise would require redirecting your visitor to a different page or would return a 404 status. One common use of rewrites is to show the same localized content for different variants of a language.</p>
<p>The following example uses a rewrite to render the <code>/es/</code> version of a page when the <code>/es-CU/</code> (Cuban Spanish) URL path is visited. When a visitor navigates to the URL <code>/es-cu/articles/introduction</code>, Astro will render the content generated by the file <code>src/pages/es/articles/introduction.astro</code>.</p>
<p>src/pages/es-cu/articles/introduction.astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---return Astro.rewrite("/es/articles/introduction")---</span></span>
<span class="line"><span></span></span></code></pre>
<p>Use <code>context.rewrite()</code> in your endpoint files to reroute to a different page:</p>
<p>src/pages/api.js</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>export function GET(context) {  if (!context.locals.allowed) {    return context.rewrite("/")  }}</span></span>
<span class="line"><span></span></span></code></pre>
<p>If the URL passed to <code>Astro.rewrite()</code> emits a runtime error, Astro will show the overlay error in development and return a 500 status code in production. If the URL does not exist in your project, a 404 status code will be returned.</p>
<p>You can intentionally create a rewrite to render your <code>/404</code> page, for example to indicate that a product in your e-commerce shop is no longer available:</p>
<p>src/pages/[item].astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---const { item } = Astro.params;</span></span>
<span class="line"><span>if (!itemExists(item)) {  return Astro.rewrite("/404")}---</span></span>
<span class="line"><span>&#x3C;div>...&#x3C;/div></span></span>
<span class="line"><span></span></span></code></pre>
<p>You can also conditionally rewrite based on an HTTP response status, for example to display a certain page on your site when visiting a URL that doesn’t exist:</p>
<p>src/middleware.mjs</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>export const onRequest = async (context, next) => {  const response = await next();  if (response.status === 404) {    return context.rewrite("/");  }  return response;}</span></span>
<span class="line"><span></span></span></code></pre>
<p>Before displaying the content from the specified rewrite path, the function <code>Astro.rewrite()</code> will trigger a new, complete rendering phase. This re-executes any middleware for the new route/request.</p>
<p>See the <a href="/en/reference/api-reference/#astrorewrite"><code>Astro.rewrite()</code> API reference</a> for more information.</p>
<h2 id="route-priority-order">Route Priority Order</h2>
<p><a href="#route-priority-order">Section titled Route Priority Order</a>
It’s possible for multiple defined routes to attempt to build the same URL path. For example, all of these routes could build <code>/posts/create</code>:</p>
<ul>
<li>
<p>Directorysrc/pages/</p>
<ul>
<li>
<p>[…slug].astro</p>
</li>
<li>
<p>Directoryposts/</p>
<ul>
<li>create.astro</li>
<li>[page].astro</li>
<li>[pid].ts</li>
<li>[…slug].astro</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Astro needs to know which route should be used to build the page. To do so, it sorts them according to the following rules in order:</p>
<ul>
<li>Astro <a href="#reserved-routes">reserved routes</a></li>
<li>Routes with more path segments will take precedence over less specific routes. In the example above, all routes under <code>/posts/</code> take precedence over <code>/[...slug].astro</code> at the root.</li>
<li>Static routes without path parameters will take precedence over dynamic routes. E.g. <code>/posts/create.astro</code> takes precedence over all the other routes in the example.</li>
<li>Dynamic routes using named parameters take precedence over rest parameters. E.g. <code>/posts/[page].astro</code> takes precedence over <code>/posts/[...slug].astro</code>.</li>
<li>Pre-rendered dynamic routes take precedence over server dynamic routes.</li>
<li>Endpoints take precedence over pages.</li>
<li>File-based routes take precedence over redirects.</li>
<li>If none of the rules above decide the order, routes are sorted alphabetically based on the default locale of your Node installation.</li>
</ul>
<p>Given the example above, here are a few examples of how the rules will match a requested URL to the route used to build the HTML:</p>
<ul>
<li><code>pages/posts/create.astro</code> - Will build only <code>/posts/create</code></li>
<li><code>pages/posts/[pid].ts</code> - Will build <code>/posts/abc</code>, <code>/posts/xyz</code>, etc. But not <code>/posts/create</code></li>
<li><code>pages/posts/[page].astro</code> - Will build <code>/posts/1</code>, <code>/posts/2</code>, etc. But not <code>/posts/create</code>, <code>/posts/abc</code> nor <code>/posts/xyz</code></li>
<li><code>pages/posts/[...slug].astro</code> - Will build <code>/posts/1/2</code>, <code>/posts/a/b/c</code>, etc. But not <code>/posts/create</code>, <code>/posts/1</code>, <code>/posts/abc</code>, etc.</li>
<li><code>pages/[...slug].astro</code> - Will build <code>/abc</code>, <code>/xyz</code>, <code>/abc/xyz</code>, etc. But not <code>/posts/create</code>, <code>/posts/1</code>, <code>/posts/abc</code>, , etc.</li>
</ul>
<h3 id="reserved-routes">Reserved routes</h3>
<p><a href="#reserved-routes">Section titled Reserved routes</a>
Internal routes take priority over any user-defined or integration-defined routes as they are required for Astro features to work. The following are Astro’s reserved routes:</p>
<ul>
<li><code>_astro/</code>: Serves all of the static assets to the client, including CSS documents, bundled client scripts, optimized images, and any Vite assets.</li>
<li><code>_server_islands/</code>: Serves the dynamic components deferred into a <a href="/en/reference/configuration-reference/#experimentalserverislands">server island</a>.</li>
<li><code>_actions/</code>: Serves any defined <a href="/en/guides/actions/">actions</a>.</li>
</ul>
<h2 id="pagination">Pagination</h2>
<p><a href="#pagination">Section titled Pagination</a>
Astro supports built-in pagination for large collections of data that need to be split into multiple pages. Astro will generate common pagination properties, including previous/next page URLs, total number of pages, and more.</p>
<p>Paginated route names should use the same <code>[bracket]</code> syntax as a standard dynamic route. For instance, the file name <code>/astronauts/[page].astro</code> will generate routes for <code>/astronauts/1</code>, <code>/astronauts/2</code>, etc, where <code>[page]</code> is the generated page number.</p>
<p>You can use the <code>paginate()</code> function to generate these pages for an array of values like so:</p>
<p>src/pages/astronauts/[page].astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---export async function getStaticPaths({ paginate }) {  const astronautPages = [{    astronaut: 'Neil Armstrong',  }, {    astronaut: 'Buzz Aldrin',  }, {    astronaut: 'Sally Ride',  }, {    astronaut: 'John Glenn',  }];  // Generate pages from our array of astronauts, with 2 to a page  return paginate(astronautPages, { pageSize: 2 });}// All paginated data is passed on the "page" propconst { page } = Astro.props;---</span></span>
<span class="line"><span>&#x3C;!--Display the current page number. Astro.params.page can also be used!-->&#x3C;h1>Page {page.currentPage}&#x3C;/h1>&#x3C;ul>  &#x3C;!--List the array of astronaut info-->  {page.data.map(({ astronaut }) => &#x3C;li>{astronaut}&#x3C;/li>)}&#x3C;/ul></span></span>
<span class="line"><span></span></span></code></pre>
<p>This generates the following pages, with 2 items to a page:</p>
<ul>
<li><code>/astronauts/1</code> - Page 1: Displays “Neil Armstrong” and “Buzz Aldrin”</li>
<li><code>/astronauts/2</code> - Page 2: Displays “Sally Ride” and “John Glenn”</li>
</ul>
<h3 id="the-page-prop">The <code>page</code> prop</h3>
<p><a href="#the-page-prop">Section titled The page prop</a>
When you use the <code>paginate()</code> function, each page will be passed its data via a <code>page</code> prop. The <code>page</code> prop has many useful properties that you can use to build pages and links between them:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>interface Page&#x3C;T = any> {  /** array containing the page’s slice of data that you passed to the paginate() function */  data: T[];  /** metadata */  /** the count of the first item on the page, starting from 0 */  start: number;  /** the count of the last item on the page, starting from 0 */  end: number;  /** total number of results */  total: number;  /** the current page number, starting from 1 */  currentPage: number;  /** number of items per page (default: 10) */  size: number;  /** number of last page */  lastPage: number;  url: {    /** url of the current page */    current: string;    /** url of the previous page (if there is one) */    prev: string | undefined;    /** url of the next page (if there is one) */    next: string | undefined;    /** url of the first page (if the current page is not the first page) */    first: string | undefined;    /** url of the last page (if the current page in not the last page) */    last: string | undefined;  };}</span></span>
<span class="line"><span></span></span></code></pre>
<p>The following example displays current information for the page along with links to navigate between pages:</p>
<p>src/pages/astronauts/[page].astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---// Paginate same list of { astronaut } objects as the previous exampleexport async function getStaticPaths({ paginate }) { /* ... */ }const { page } = Astro.props;---&#x3C;h1>Page {page.currentPage}&#x3C;/h1>&#x3C;ul>  {page.data.map(({ astronaut }) => &#x3C;li>{astronaut}&#x3C;/li>)}&#x3C;/ul>{page.url.first ? &#x3C;a href={page.url.first}>First&#x3C;/a> : null}{page.url.prev ? &#x3C;a href={page.url.prev}>Previous&#x3C;/a> : null}{page.url.next ? &#x3C;a href={page.url.next}>Next&#x3C;/a> : null}{page.url.last ? &#x3C;a href={page.url.last}>Last&#x3C;/a> : null}</span></span>
<span class="line"><span></span></span></code></pre>
<p>Learn more about <a href="/en/reference/api-reference/#the-pagination-page-prop">the pagination <code>page</code> prop</a>.</p>
<h3 id="nested-pagination">Nested Pagination</h3>
<p><a href="#nested-pagination">Section titled Nested Pagination</a>
A more advanced use-case for pagination is <strong>nested pagination.</strong> This is when pagination is combined with other dynamic route params. You can use nested pagination to group your paginated collection by some property or tag.</p>
<p>For example, if you want to group your paginated Markdown posts by some tag, you would use nested pagination by creating a <code>/src/pages/[tag]/[page].astro</code> page that would match the following URLS:</p>
<ul>
<li><code>/red/1</code> (tag=red)</li>
<li><code>/red/2</code> (tag=red)</li>
<li><code>/blue/1</code> (tag=blue)</li>
<li><code>/green/1</code> (tag=green)</li>
</ul>
<p>Nested pagination works by returning an array of <code>paginate()</code> results from <code>getStaticPaths()</code>, one for each grouping.</p>
<p>In the following example, we will implement nested pagination to build the URLs listed above:</p>
<p>src/pages/[tag]/[page].astro</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---export async function getStaticPaths({ paginate }) {  const allTags = ['red', 'blue', 'green'];  const allPosts = await Astro.glob('../../posts/*.md');  // For every tag, return a paginate() result.  // Make sure that you pass `{params: {tag}}` to `paginate()`  // so that Astro knows which tag grouping the result is for.  return allTags.flatMap((tag) => {    const filteredPosts = allPosts.filter((post) => post.frontmatter.tag === tag);    return paginate(filteredPosts, {      params: { tag },      pageSize: 10    });  });}const { page } = Astro.props;const params = Astro.params;</span></span>
<span class="line"><span></span></span></code></pre>
<h2 id="excluding-pages">Excluding pages</h2>
<p><a href="#excluding-pages">Section titled Excluding pages</a>
You can exclude pages or directories from being built by prefixing their names with an underscore (<code>_</code>). Files with the <code>_</code> prefix won’t be recognized by the router and won’t be placed into the <code>dist/</code> directory.</p>
<p>You can use this to temporarily disable pages, and also to put tests, utilities, and components in the same folder as their related pages.</p>
<p>In this example, only <code>src/pages/index.astro</code> and <code>src/pages/posts/post1.md</code> will be built as page routes and HTML files.</p>
<ul>
<li>
<p>Directorysrc/pages/</p>
<ul>
<li>
<p>Directory_hidden-directory/</p>
<ul>
<li>page1.md</li>
<li>page2.md</li>
</ul>
</li>
<li>
<p>_hidden-page.astro</p>
</li>
<li>
<p><strong>index.astro</strong></p>
</li>
<li>
<p>Directoryposts/</p>
<ul>
<li>_SomeComponent.astro</li>
<li>_utils.js</li>
<li><strong>post1.md</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Learn</p> </div> <div class="prose-a:no-underline flex gap-2"> <span class="badge badge-outline badge-md"> <a href="/tags/documentation/1/">documentation</a> </span><span class="badge badge-outline badge-md"> <a href="/tags/Go/1/">Go</a> </span><span class="badge badge-outline badge-md"> <a href="/tags/Sass/1/">Sass</a> </span> </div> <div class="mt-4 flex justify-between"> <small>Publish on <span class="font-weight-bold">2024-01-20</span>，Update on <span class="font-weight-bold">2025-01-09</span></small> </div> </article> <div class="mt-12"> <div class="grid grid-cols-1 gap-4 md:grid-cols-3"> <div class="card mb-4 overflow-hidden rounded-xl border  transition-transform duration-500 hover:-translate-y-1 hover:scale-105"> <a href="/posts/welcome-world-getting-started/"> <picture> <source srcset="/_astro/photo-1555883006-0f5a0915a80f_PusRg.avif 392w, /_astro/photo-1555883006-0f5a0915a80f_Zl2Pds.avif 700w, /_astro/photo-1555883006-0f5a0915a80f_21GgzD.avif 980w, /_astro/photo-1555883006-0f5a0915a80f_13KP0J.avif 1960w" type="image/avif" sizes="(max-width: 360px) 392px, 
           (max-width: 720px) 700px, 
           (max-width: 1600px) 980px, 
           1960px"> <img src="/_astro/photo-1555883006-0f5a0915a80f_13KP0J.avif" srcset="/_astro/photo-1555883006-0f5a0915a80f_PusRg.avif 392w, /_astro/photo-1555883006-0f5a0915a80f_Zl2Pds.avif 700w, /_astro/photo-1555883006-0f5a0915a80f_21GgzD.avif 980w, /_astro/photo-1555883006-0f5a0915a80f_13KP0J.avif 1960w" alt="view of white metal tower through cherry blossom tree" sizes="(max-width: 360px) 392px, 
           (max-width: 720px) 700px, 
           (max-width: 1600px) 980px, 
           1960px" class="mx-auto w-full max-w-full object-cover" width="1960" height="1102" loading="lazy" decoding="async"> </picture> <div class="card-body"> <div class="flex items-center gap-1 text-xs"> <span class="badge badge-outline">basics</span><span class="badge badge-outline">Javascript</span><span class="badge badge-outline">Less</span> </div> <p class="text-xs"><span class="font-weight-bold">2024-03-01</span></p> <h2 class="card-title">Getting Started</h2> </div> </a> </div><div class="card mb-4 overflow-hidden rounded-xl border  transition-transform duration-500 hover:-translate-y-1 hover:scale-105"> <a href="/posts/astro-api-reference-reference-api-reference/"> <picture> <source srcset="/_astro/photo-1514539079130-25950c84af65_ZG1oHX.avif 392w, /_astro/photo-1514539079130-25950c84af65_Z1RyHNG.avif 700w, /_astro/photo-1514539079130-25950c84af65_uanYp.avif 980w, /_astro/photo-1514539079130-25950c84af65_1abTbp.avif 1960w" type="image/avif" sizes="(max-width: 360px) 392px, 
           (max-width: 720px) 700px, 
           (max-width: 1600px) 980px, 
           1960px"> <img src="/_astro/photo-1514539079130-25950c84af65_1abTbp.avif" srcset="/_astro/photo-1514539079130-25950c84af65_ZG1oHX.avif 392w, /_astro/photo-1514539079130-25950c84af65_Z1RyHNG.avif 700w, /_astro/photo-1514539079130-25950c84af65_uanYp.avif 980w, /_astro/photo-1514539079130-25950c84af65_1abTbp.avif 1960w" alt="closeup photo of castle with mist" sizes="(max-width: 360px) 392px, 
           (max-width: 720px) 700px, 
           (max-width: 1600px) 980px, 
           1960px" class="mx-auto w-full max-w-full object-cover" width="1960" height="1102" loading="lazy" decoding="async"> </picture> <div class="card-body"> <div class="flex items-center gap-1 text-xs"> <span class="badge badge-outline">astro</span><span class="badge badge-outline">Go</span><span class="badge badge-outline">Sass</span> </div> <p class="text-xs"><span class="font-weight-bold">2024-02-25</span></p> <h2 class="card-title">Astro Runtime API</h2> </div> </a> </div><div class="card mb-4 overflow-hidden rounded-xl border  transition-transform duration-500 hover:-translate-y-1 hover:scale-105"> <a href="/posts/routes-and-navigation-guides-internationalization/"> <picture> <source srcset="/_astro/photo-1463130456064-77fda7f96d6b_ZAMhtG.avif 392w, /_astro/photo-1463130456064-77fda7f96d6b_Z1MkAzp.avif 700w, /_astro/photo-1463130456064-77fda7f96d6b_zovdG.avif 980w, /_astro/photo-1463130456064-77fda7f96d6b_Z1fOymS.avif 1960w" type="image/avif" sizes="(max-width: 360px) 392px, 
           (max-width: 720px) 700px, 
           (max-width: 1600px) 980px, 
           1960px"> <img src="/_astro/photo-1463130456064-77fda7f96d6b_Z1fOymS.avif" srcset="/_astro/photo-1463130456064-77fda7f96d6b_ZAMhtG.avif 392w, /_astro/photo-1463130456064-77fda7f96d6b_Z1MkAzp.avif 700w, /_astro/photo-1463130456064-77fda7f96d6b_zovdG.avif 980w, /_astro/photo-1463130456064-77fda7f96d6b_Z1fOymS.avif 1960w" alt="white concrete building wall" sizes="(max-width: 360px) 392px, 
           (max-width: 720px) 700px, 
           (max-width: 1600px) 980px, 
           1960px" class="mx-auto w-full max-w-full object-cover" width="1960" height="1102" loading="lazy" decoding="async"> </picture> <div class="card-body"> <div class="flex items-center gap-1 text-xs"> <span class="badge badge-outline">basics</span><span class="badge badge-outline">PHP</span><span class="badge badge-outline">Css</span> </div> <p class="text-xs"><span class="font-weight-bold">2024-02-23</span></p> <h2 class="card-title">Internationalization (i18n) Routing</h2> </div> </a> </div> </div> </div> </main>  </main> <footer class="mx-auto mt-auto w-full max-w-[85rem] py-10"> <nav class="mx-auto w-full max-w-[85rem] px-4" aria-label="Footer"> <div class="flex flex-col items-center sm:flex-row sm:justify-between"> <div id="navbar-alignment" class="internal-links sm:order-2"> <div class="mt-2 flex flex-row gap-5 sm:mt-0 sm:flex-row sm:items-center sm:ps-5"> <a href="/posts/core-concepts-concepts-why-astro/" class="inline-flex gap-x-2 text-sm"> Astro </a><a href="/posts/assets-guides-styling/" class="inline-flex gap-x-2 text-sm"> Styling </a><a href="/tags/" class="inline-flex gap-x-2 text-sm"> Tags </a> </div> </div> <div class="mt-2 flex flex-wrap gap-2 sm:order-3 sm:mb-0 sm:gap-0"> <button type="button" class="relative inline-flex h-12 w-12 items-center gap-x-2 px-4 py-3 disabled:pointer-events-none disabled:opacity-50"> <a href="/rss.xml" class="absolute inset-0 z-10" aria-label="RSS"></a> <i class="i-tabler-rss icon-base"></i> </button><button type="button" class="relative inline-flex h-12 w-12 items-center gap-x-2 px-4 py-3 disabled:pointer-events-none disabled:opacity-50"> <a href="https://twitter.com/astrodotbuild" class="absolute inset-0 z-10" aria-label="Twitter"></a> <i class="i-tabler-brand-twitter icon-base"></i> </button><button type="button" class="relative inline-flex h-12 w-12 items-center gap-x-2 px-4 py-3 disabled:pointer-events-none disabled:opacity-50"> <a href="https://github.com/isooosi" class="absolute inset-0 z-10" aria-label="GitHub"></a> <i class="i-tabler-brand-github icon-base"></i> </button> </div> <div class="mt-2 sm:order-1 sm:mb-0"> <a class="flex-none text-sm" href="/" aria-label="Brand">AstroMelody &copy; 2025</a> </div> </div> </nav> </footer> </body></html>